import numpy as np

def generate_series(base: float, trend: float, seasonal_amp: float, noise_scale: float, length: int = 48) -> np.ndarray:

    # генерация аддитивного временного рядя длины length из трёх систематических составляющих — уровень, линейный тренд, сезонность — плюс шум (гауссов), и редкие выбросы (“шпильки”).
    # base — базовый уровень ряда (средний уровень без тренда/сезонности). Единицы такие же, как у целевого показателя (например, поездо-час/1 млн поездо-км).
    # trend — приращение за один шаг времени. Если данные месячные, то это изменение в единицах за месяц. Знак «−» даёт нисходящий тренд.
    # seasonal_amp — амплитуда сезонных колебаний (аддитивная). При 10 сезонная волна колеблется примерно ±10 вокруг трендовой линии.
    # noise_scale — стандартное отклонение белого шума N(0, noise_scale^2).
    # length — количество точек (по умолчанию 48 месяцев = 4 года).

    t = np.arange(length)     # дискретное время в шагах (месяцах).
    seasonal = seasonal_amp * np.sin(2 * np.pi * t / 12)    # используется синус с периодом 12 (месяцев) — классическая гладкая сезонность.
    series = base + trend * t + seasonal + np.random.normal(scale=noise_scale, size=length)     # базовая аддитивная структура + шум
    spikes = np.random.choice([0, 0, 0, 50, -50], size=length, p=[0.8, 0.1, 0.05, 0.03, 0.02])  # около 5% точек — выбросы
    return series + spikes